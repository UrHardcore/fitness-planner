<!DOCTYPE html>
<html lang="es" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>Gonza Hard-Fitness Planner</title>
  <link rel="icon" href="https://i.ibb.co/bnRB2Sk/processed-image-3.png">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ========== LOGIN ========== -->
  <section id="login-screen" class="screen login-screen">
    <img class="bg" src="https://i.ibb.co/0p57Nz3P/wallpaperflare-com-wallpaper.jpg" alt="bg" />
    <div class="login-card">
      <div class="login-left">
        <img class="brand" src="https://i.ibb.co/67XdVm7T/processed-image-3.png" alt="logo">
      </div>

      <div class="login-right">
        <h1>Gonza <span>Hard-Fitness</span> Planner</h1>
        <p class="muted">Accedé con Google o con tu correo</p>

        <button id="googleBtn" type="button" class="btn primary w100 mb8">
          Iniciar sesión con Google
        </button>

        <div class="divider"><span>o</span></div>

        <form id="emailForm" class="form">
          <label>Email</label>
          <input id="emailInput" type="email" placeholder="tu@correo.com" required>
          <label>Contraseña</label>
          <input id="passInput" type="password" placeholder="mínimo 6 caracteres" required>

          <div class="row wrap g8">
            <button id="emailLoginBtn" type="button" class="btn w100-sm">Iniciar sesión</button>
            <button id="emailRegisterBtn" type="button" class="btn ghost w100-sm">Crear cuenta</button>
          </div>

          <button id="resetPassBtn" type="button" class="link-btn">Olvidé mi contraseña</button>
          <div id="authMsg" class="muted small hidden"></div>
        </form>

        <div class="login-actions hidden" aria-hidden="true">
          <label class="switch">
            <input id="themeToggleLogin" type="checkbox" />
            <span class="slider"></span>
          </label>
          <small>Dark</small>
        </div>
      </div>
    </div>
    <footer class="login-footer">© <span id="yy">Creado por </span><b>Luis Alles</b></footer>
  </section>

  <!-- ===== Preferred Name Modal ===== -->
  <div id="nameModal" class="modal hidden">
    <div class="modal-card">
      <button class="modal-x" id="nameClose" aria-label="Cerrar">×</button>
      <h3>¿Cómo te gustaría que te digan?</h3>
      <input id="preferredNameInput" type="text" placeholder="Tu nombre / apodo" maxlength="60" />
      <div class="right mt8">
        <button id="savePreferredName" class="btn primary">Guardar</button>
      </div>
    </div>
  </div>

  <!-- ========== APP ========== -->
  <section id="app-screen" class="screen app-screen hidden">
    <header class="topbar">
      <div class="left">
        <img class="brand-sm" src="https://i.ibb.co/bnRB2Sk/processed-image-3.png" alt="logo">
        <div class="by">
          <strong>Gonza Hard-Fitness Planner</strong>
          <span id="routineTitle" class="muted"></span>
        </div>
      </div>
      <div class="right">
        <span id="userName" class="user"></span>
        <label class="switch">
          <input id="themeToggleApp" type="checkbox" />
          <span class="slider"></span>
        </label>
        <button id="logoutBtn" type="button" class="btn danger outline">Cerrar sesión</button>
      </div>
    </header>

    <main class="content">
      <section id="adminTools" class="card hidden">
        <h3>Herramientas de administrador</h3>
        <div class="row">
          <div class="col">
            <label>Buscar usuario (email):</label>
            <input id="searchEmail" type="email" placeholder="usuario@correo.com">
          </div>
          <div class="col auto">
            <button id="btnSearchUser" type="button" class="btn">Buscar</button>
          </div>
        </div>
        <div id="results" class="results"></div>
      </section>

      <section class="card">
        <div class="row wrap g8 align-center">
          <div class="col">
            <label>Semana</label>
            <select id="weekSelect"></select>
          </div>
          <div class="col auto">
            <label>&nbsp;</label>
            <button id="btnChangeWeek" type="button" class="btn primary">Cambiar semana</button>
          </div>
          <div class="col">
            <label>Inicio de semana</label>
            <input id="startDate" type="date">
          </div>
          <div class="col">
            <label>Alumno</label>
            <input id="currentStudent" type="text" disabled>
          </div>
          <div class="col auto right">
            <button id="btnAddWeek" type="button" class="btn ghost adminOnly hidden">+ Agregar semana</button>
            <button id="btnSavePlan" type="button" class="btn primary adminOnly hidden">Guardar cambios</button>
            <span id="saveIndicator" class="muted small"></span>
          </div>
        </div>

        <div class="tabs" id="dayTabs"></div>

        <div class="table-wrap">
          <div class="row between mb8">
            <button id="btnAddRowTop" type="button" class="btn ghost adminOnly hidden">+ Fila</button>
          </div>
          <table id="planTable" class="table">
            <thead>
              <tr>
                <th>Ejercicio</th>
                <th>Series</th>
                <th>Reps</th>
                <th>Descanso (s)</th>
                <th>Notas</th>
                <th class="adminOnly hidden">Acciones</th>
              </tr>
            </thead>
            <tbody id="planBody"></tbody>
          </table>
        </div>
        <button id="btnAddRow" type="button" class="btn ghost adminOnly hidden">+ Añadir ejercicio</button>

        <p class="muted mt8">Instructor: <b>Gonzalo</b></p>
      </section>

      <section class="grid-2">
        <div class="card">
          <h3>Cronómetro de descanso</h3>
          <div class="timer">
            <input id="targetSec" type="number" min="10" step="5" placeholder="segundos objetivo (ej. 60)">
            <div id="display" class="display">00:00</div>
            <div class="btns">
              <button id="startBtn" type="button" class="btn primary">Start</button>
              <button id="pauseBtn" type="button" class="btn">Pause</button>
              <button id="timerResetBtn" type="button" class="btn danger outline">Reset</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h3>Resumen diario</h3>
          <div class="row wrap g8">
            <div class="col">
              <label>Día</label>
              <input id="dailyDate" type="date">
            </div>
          </div>
          <p class="muted">Solo tú puedes editar tu resumen.</p>
          <textarea id="dailyText" rows="6" maxlength="500" placeholder="¿Cómo te fue hoy? Sensaciones, cargas, sueño, estrés..."></textarea>
          <div class="row">
            <div class="col"></div>
            <div class="col auto right">
              <span id="dailySaved" class="muted small"></span>
              <button id="btnSaveDaily" type="button" class="btn primary">Guardar resumen</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </section>

  <!-- Timer Modal -->
  <div id="timerModal" class="modal hidden">
    <div class="modal-card">
      <button class="modal-x" id="timerClose" aria-label="Cerrar">×</button>
      <h3>Cronómetro</h3>
      <div class="display" id="modalTimerDisplay">00:00</div>
      <div class="btns">
        <button id="modalStart" class="btn primary">Iniciar</button>
        <button id="modalPause" class="btn">Parar</button>
        <button id="modalReset" class="btn danger outline">Reiniciar</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script type="module" src="app.js"></script>
</body>
</html>
